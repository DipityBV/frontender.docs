<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontender Documentation</title>

    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/css/theme.css" type="text/css"/>
    <link rel="stylesheet" href="/css/theme-fixes.css" type="text/css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
    <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
</head>
<body class="wy-body-for-nav">

    <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
            <div class="wy-side-nav-search">
                <img class="wy-side-nav-search-img" src="/assets/images/brand/f-dot-framed-theme.png" alt="Frontender Logo">
                <a href="/">Frontender Documentation</a>
            </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                                                            <div class="section">
                            <p class="text-muted">
                                About Frontender
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="/index.html">
                                            Introduction
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/introduction.html">
                                            Basic concept
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/installation.html">
                                            Creating your first project
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/support.html">
                                            Support
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/glossary.html">
                                            Glossary
                                        </a>
                                    </li>
                                                            </ul>
                        </div>
                                            <div class="section">
                            <p class="text-muted">
                                Main documentation
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="/assets.html">
                                            Assets
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/pages.html">
                                            Pages
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/landingpage.html">
                                            Landing page
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/blueprints.html">
                                            Blueprints
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/templates.html">
                                            Templates
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/container.html">
                                            Container
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/macros.html">
                                            Macros
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/helpers.html">
                                            Helpers
                                        </a>
                                    </li>
                                                                    <li class="active">
                                        <a href="/collection.html">
                                            Collections
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/filters.html">
                                            Filters
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/controls.html">
                                            Controls
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/adapters.html">
                                            Adapters
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/import.html">
                                            Import
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/file.html">
                                            File structure
                                        </a>
                                    </li>
                                                            </ul>
                        </div>
                                            <div class="section">
                            <p class="text-muted">
                                Frontender Desktop
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="/desktop/intro.html">
                                            Introduction
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/desktop/account.html">
                                            Account
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/desktop/containers.html">
                                            Containers
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/desktop/pages.html">
                                            Pages
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/desktop/blueprints.html">
                                            Blueprints
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/desktop/scopes.html">
                                            Scopes
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/desktop/teams.html">
                                            Teams
                                        </a>
                                    </li>
                                                            </ul>
                        </div>
                                            <div class="section">
                            <p class="text-muted">
                                Frequently Asked Questions
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="/faq.html">
                                            Frequently Asked Questions
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/faq/implementation.html">
                                            Implementation
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/faq/user.html">
                                            User
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/faq/pricing.html">
                                            Pricing
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/faq/spaces.html">
                                            Spaces
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/faq/sites.html">
                                            Sites
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/faq/content.html">
                                            Content
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/faq/control.html">
                                            Control
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="/faq/misc.html">
                                            Miscellaneous
                                        </a>
                                    </li>
                                                            </ul>
                        </div>
                                                </div>
            &nbsp;
        </nav>

        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                        <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
                <a href="/">Frontender Documentation</a>
            </nav>


                        <div class="wy-nav-content">
                <div class="rst-content">
                    <div role="main" class="document">
                        <h1 id="collections">Collections</h1>
<p>Page, blueprint and control definitions are stored in MongoDB collections.</p>
<p>MongoDB stores data records as <a href="https://docs.mongodb.com/manual/core/document/#bson-document-format" target="&#95;blank" rel="nofollow">BSON documents</a>. BSON is a binary representation of JSON documents, though it contains more data types than JSON.</p>
<p>Collections are always named in <a href="https://stackoverflow.com/questions/9868323/is-there-a-convention-to-name-collection-in-mongodb/ 28619919" target="&#95;blank" rel="nofollow">plural form</a>.</p>
<p>Both Frontender Desktop and Frontender Platform have access to the following collections:</p>
<ul>
<li>blueprints</li>
<li>controls</li>
<li>lots</li>
<li>pages</li>
<li>pages.public</li>
<li>pages.trash</li>
<li>routes</li>
<li>settings</li>
<li>teams</li>
</ul>
<h3 id="blueprints">Blueprints</h3>
<p>Blueprints have a revision object. The definition object contains the actual blueprint. The UUID is referenced in containers that implement that blueprint (inside page definitions). A blueprint has instructions on how to render a control, or includes a reference to a control.</p>
<p>A blueprint has a type attribute in the revision object. Possible types are:</p>
<ul>
<li>container</li>
<li>page</li>
<li>control</li>
</ul>
<pre><code class="language-JSON">{
    "_id": "ea6b893c-de10-47d6-9370-1ecddf011e58",
    "revision": {
        "hash": "71e089512689b9f29ba26a3d8db5aac9",
        "type": "container",
        "date": "2018-04-20 00:00:00",
        "lot": "07156454-f83b-4f8e-ba8f-46417564f409",
        "thumbnail": {}
    },
    "definition": {
        "frontender": "1234567890",
        "template": "path/to/template.html.twig",
        "name": {},
        "description": {},
        "template_config": {},
        "containers": []
    },
    "identifier": "container/blueprint_name"
}</code></pre>
<h3 id="controls">Controls</h3>
<p>A special kind of blueprint, only for controls. A control can reference another control.</p>
<pre><code class="language-JSON">{
    "_id": "ea6b893c-de10-47d6-9370-1ecddf011e58",
    "revision" : {
       "lot": "07156454-f83b-4f8e-ba8f-46417564f409",
       "date": "2018-04-20 00:00:00",
       "hash": "71e089512689b9f29ba26a3d8db5aac9",
       "user": {}
    },
    "definition": {
        "control": "ea6b893c-de10-47d6-9370-1ecddf011e58",
        "label": {},
        "type": "compound",
        "controls": {
            "label": {
                "label": {},
                "control": "ea6b893c-de10-47d6-9370-1ecddf011e58"
            },
            "url": {
                "label": {},
                "control": "ea6b893c-de10-47d6-9370-1ecddf011e58"
            }
        },
        "value": {
            "label": {},
            "url": {}
        }
    }
}</code></pre>
<h3 id="lots">Lots</h3>
<!-- @TODO: Verify -->
<p>Permissions are saved in the lots collection. All pages are linked to teams in this collection, you won't be able to edit a page if you're not linked to it by team.</p>
<h3 id="pages">Pages</h3>
<p>Pages are similar to a blueprint, but contain containers (that may reference blueprints). They also contain a <code>template_config.route.path</code> object that is used by the front-end router. When the path object is empty, the lot id will be used as a default.</p>
<p>The <code>template_config.route.path</code> object is required for each page object, without it the router cannot access it. Frontender Desktop will be implement a UI that enforces that the path object is not empty. When the path object is empty, the lot id will be used as a default.</p>
<pre><code class="language-JSON">{
    "_id": "ea6b839c-de10-47d6-9730-1ecddf101e58",
    "revision": {
        "lot": "07465154-f83b-4f8e-ba8f-46417564f409",
        "date": "2018-04-20 00:00:00",
        "hash": "71e052198689b9f29ba26a3d8db5aac9",
        "thumbnail": {},
        "user": {}
    },
    "definition": {
        "route": {},
        "frontender": "1234567890",
        "template": "path/to/template.html.twig",
        "name": {},
        "description": {},
        "page_config": {},
        "template_config": {},
        "containers": []
    }
}</code></pre>
<h3 id="pagespublic">Pages.public</h3>
<p>Identical to <code>pages</code> collection. Each page is an identical copy of a revision. When a page is published, the page definition is copied from the <code>pages</code> collection to the <code>pages.public</code> collection. When requesting a revision list in Frontender, page definitions from the <code>pages</code> collections are sanitised to exclude pages with identical hashes, only the version with the earliest revision date is included. When the a revision has an identical lot and hash as a page in the <code>pages.public</code> collection, it is marked in the UI as the currently published revision.</p>
<h3 id="pagestrash">Pages.trash</h3>
<p>Pages that have been removed. The published page is permanently deleted, all its revisions are moved to the <code>trash</code> collection.</p>
<h3 id="controls-1">Controls</h3>
<p>A special kind of blueprint, only for controls. A control can reference another control.
Frontender comes with a couple of core controls out of the box, these may be used alongside custom project controls. See the <a href="/controls.html">controls page</a> for more information.</p>
<pre><code class="language-JSON">{
    "value": "",
    "label": {
        "en-GB": "Allow overlap"
    },
    "control": "core/list",
    "options": [
        {
            "value": "",
            "label": {
                "en-GB": "none"
            }
        },
        {
            "value": "overlap-top",
            "label": {
                "en-GB": "Top overlap"
            }
        },
        {
            "value": "overlap-bottom",
            "label": {
                "en-GB": "Bottom overlap"
            }
        }
    ]
}</code></pre>
<h3 id="routes">Routes</h3>
<p>All redirects are stored in the routes collection. Both permanent and temporary redirects.<br />
Each redirect is saved with a status of <code>301</code> or <code>302</code>.</p>
<p>A page is identified by its route. When a route changes, it will trigger the storage of a new version. This implies that the previous route is part of the previous revision but since the route defines the page the revisions can no longer be related to the same route.</p>
<h3 id="settings">Settings</h3>
<p>Site settings are saved in this collection. This includes a randomly generated <code>site_id</code> used to identify the website.<br />
Scopes, locales, root page and preview settings.</p>
<h3 id="teams">Teams</h3>
<p>An array list of user ids.<br />
Teams are used to set the permissions of user groups.</p>
                    </div>

                    <footer>
                        <hr/>
                        <div class="footer__accreditation accreditation">
                            <p class="accreditation__copyright"><small>Â© 2019 Frontender. All rights reserved</small></p>
                            <p class="accreditation__attribution attribution">
                                <img class="attribution__brand img" src="/assets/images/brand/f-dot-framed-theme.png">
                                <a href="https://getfrontender.com" target="_blank"><small>Frontender homepage</small></a>
                            </p>
                        </div>
                    </footer>

                </div>
            </div>

        </section>

    </div>

    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="/js/theme.js"></script>

    <script>
        $(function() {
            // Syntax highlighting
            hljs.initHighlightingOnLoad();
        });
        $(function() {
            $('li.active').parent().parent().addClass('active');
        });
    </script>

</body>
</html>
